# Run Immich Application Container and Its Services Using Podman, Managed with Systemd & Quadlet

Before deploying Immich, ensure you have followed the initial setup steps:

1.  **Configure Environment:** Create a `.env` file in the `./config` directory by copying the contents of `env.example` file. This file will hold the necessary environment variables for your Immich setup.
    ```bash
    cp ./config/env.example ./config/.env
    ```

2.  **Navigate to Scripts Directory:** Change your current directory to the `./scripts` directory, where the make commands are located.
    ```bash
    cd ./scripts
    ```

## Make Commands

Once the above steps are complete, you can use the following `make` commands:

Deploy Immich and its services as a pod and start using systemd service:

```bash
make install
```

Remove the Immich pod and its services without deleting data volumes:

```bash
make remove
```

Remove the Immich data volumes:

```bash
make remove-volumes
```

Debug the systemd service file generated by Quadlet:

```bash
make debug
```

> **Note:**
>
> *   The Quadlet binary location may vary depending on your distribution.
> *   The default locations (configurable in the `Makefile`) are:
>     *   For Debian-based systems: `/usr/libexec/podman/quadlet`
>     *   For Fedora-based systems: `/usr/libexec/podman/quadlet`
>     *   For Arch-based systems: `/usr/lib/podman/quadlet`

## Manage Using Systemd

Mask the service to prevent it from starting automatically:

```bash
systemctl --user mask immich-pod.service
```

Unmask the service to allow it to start automatically:

```bash
systemctl --user unmask immich-pod.service
```

## Network Configuration

Immich is accessible on the local machine via:

-   **Immich Application**: [http://localhost:2283](http://localhost:2283)
-   **Adminer Database Management**: [http://localhost:2284](http://localhost:2284)

Adminer is installed alongside Immich to facilitate the viewing and management of the Immich database through a web browser interface.

## Using Adminer to Manage the Immich Database

Adminer is a full-featured database management tool available through a web application.

To access Adminer:

1.  Open your web browser.
2.  Navigate to [http://localhost:2284](http://localhost:2284).
3.  Log in with the appropriate credentials to manage the Immich database.

For more detailed instructions and best practices on using Adminer, refer to the [official Adminer documentation](https://www.adminer.org/).

## Database Password

A password file (defined as `DB_PASS_FILE` in the `Makefile`) for the database will be automatically generated during the installation process at the config directory. If one already exists, it will be used.

